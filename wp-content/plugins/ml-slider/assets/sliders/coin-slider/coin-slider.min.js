!function(t){var d=[],e=[],s=[],n=[],a=[],o=[],c=[],r=[],p=[],l=[],u=[],h=0;t.fn.coinslider=t.fn.CoinSlider=function(f){var v=function(i){if(!0===d[i.id].autoplay){clearInterval(c[i.id]);var t=d[i.id].delay+d[i.id].spw*d[i.id].sph*d[i.id].sDelay;c[i.id]=setInterval(function(){g(i)},t)}},g=function(i,n){!0!==d[i.id].pause&&(x(i),l[i.id]=0,p[i.id]=setInterval(function(){w(i,e[i.id][l[i.id]])},d[i.id].sDelay),t(i).css({"background-image":'url("'+s[i.id][r[i.id]]+'")'}),void 0===n?r[i.id]++:"prev"==n?r[i.id]--:r[i.id]=n,r[i.id]==s[i.id].length&&(r[i.id]=0),-1==r[i.id]&&(r[i.id]=s[i.id].length-1),t(".cs-button-"+i.id).removeClass("cs-active"),t("#cs-button-"+i.id+"-"+(r[i.id]+1)).addClass("cs-active"),o[i.id][r[i.id]]?(t("#cs-title-"+i.id).css({opacity:0}).animate({opacity:d[i.id].opacity},d[i.id].titleSpeed),t("#cs-title-"+i.id).html(o[i.id][r[i.id]])):t("#cs-title-"+i.id).css("opacity",0))},w=function(i,e){t(".cs-"+i.id).attr("href",n[i.id][r[i.id]]).attr("target",a[i.id][r[i.id]]),l[i.id]!=d[i.id].spw*d[i.id].sph?(t("#cs-"+i.id+e).css({opacity:0,"background-image":'url("'+s[i.id][r[i.id]]+'")'}),t("#cs-"+i.id+e).animate({opacity:1},300),l[i.id]++):clearInterval(p[i.id])},x=function(i){var t,s,n,a,o=["random","swirl","rain","straight"];if(a=""===d[i.id].effect?o[Math.floor(Math.random()*o.length)]:d[i.id].effect,e[i.id]=[],"random"==a){for(n=0,t=1;t<=d[i.id].sph;t++)for(s=1;s<=d[i.id].spw;s++)e[i.id][n]=t+""+s,n++;b(e[i.id])}"rain"==a&&y(i),"swirl"==a&&m(i),"straight"==a&&k(i),u[i.id]*=-1,u[i.id]>0&&e[i.id].reverse()},b=function(i){var t,d,e,s=i.length;if(0===s)return!1;for(;--s;)t=Math.floor(Math.random()*(s+1)),d=i[s],e=i[t],i[s]=e,i[t]=d},m=function(i){for(var t,s,n=d[i.id].sph,a=d[i.id].spw,o=1,c=1,r=0,p=0,l=0,u=!0;u;){for(p=0===r||2===r?a:n,s=1;s<=p;s++)if(e[i.id][l]=o+""+c,l++,s!=p)switch(r){case 0:c++;break;case 1:o++;break;case 2:c--;break;case 3:o--}switch(r=(r+1)%4){case 0:a--,c++;break;case 1:n--,o++;break;case 2:a--,c--;break;case 3:n--,o--}a<=(t=I(n,a)-N(n,a))&&n<=t&&(u=!1)}},y=function(t){for(var s=d[t.id].sph,n=d[t.id].spw,a=0,o=1,c=1,r=1,p=!0;p;){for(i=r;i<=o;i++)e[t.id][a]=i+""+parseInt(c-i+1),a++;c++,o<s&&c<n&&s<n&&o++,o<s&&s>=n&&o++,c>n&&r++,r>o&&(p=!1)}},k=function(i){var t,s,n=0;for(t=1;t<=d[i.id].sph;t++)for(s=1;s<=d[i.id].spw;s++)e[i.id][n]=t+""+s,n++},N=function(i,t){return i>t?t:i},I=function(i,t){return i<t?t:i},P=function(i){""===i.id&&(i.id="coinsliderUniqueID"+h++),e[i.id]=[],s[i.id]=[],n[i.id]=[],a[i.id]=[],o[i.id]=[],r[i.id]=0,l[i.id]=0,u[i.id]=1,d[i.id]=t.extend({},t.fn.coinslider.defaults,f),t.each(t("#"+i.id+" img"),function(d,e){s[i.id][d]=t(e).attr("src")||e.src,n[i.id][d]=t(e).parent().is("a")?t(e).parent().attr("href"):"",a[i.id][d]=t(e).parent().is("a")?t(e).parent().attr("target"):"",o[i.id][d]=t(e).next().is("span")?t(e).next().html():"",t(e).hide(),t(e).next().hide()}),t(i).css({"background-image":'url("'+s[i.id][0]+'")',width:d[i.id].width,height:d[i.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+i.id+"' />"),t("#"+i.id).append("<div class='cs-title' id='cs-title-"+i.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>"),function(i){var s,a,o=parseInt(d[i.id].width/d[i.id].spw),c=o,r=parseInt(d[i.id].height/d[i.id].sph),p=r,l=0,u=0,h=0,f=d[i.id].width-d[i.id].spw*c,v=f,g=d[i.id].height-d[i.id].sph*p;for(s=1;s<=d[i.id].sph;s++){for(v=f,g>0?(g--,p=r+1):p=r,a=1;a<=d[i.id].spw;a++)v>0?(v--,c=o+1):c=o,e[i.id][l]=s+""+a,l++,d[i.id].links?t("#"+i.id).append("<a href='"+n[i.id][0]+"' class='cs-"+i.id+"' id='cs-"+i.id+s+a+"' style='width:"+c+"px; height:"+p+"px; float: left; position: absolute;'></a>"):t("#"+i.id).append("<div class='cs-"+i.id+"' id='cs-"+i.id+s+a+"' style='width:"+c+"px; height:"+p+"px; float: left; position: absolute;'></div>"),t("#cs-"+i.id+s+a).css({"background-position":-u+"px "+-h+"px",left:u,top:h}),u+=c;h+=p,u=0}d[i.id].navigationPrevNextAlwaysShown||(t(".cs-"+i.id).mouseover(function(){t("#cs-navigation-"+i.id).show()}),t(".cs-"+i.id).mouseout(function(){t("#cs-navigation-"+i.id).hide()}),t("#cs-title-"+i.id).mouseover(function(){t("#cs-navigation-"+i.id).show()}),t("#cs-title-"+i.id).mouseout(function(){t("#cs-navigation-"+i.id).hide()})),d[i.id].hoverPause&&(t(".cs-"+i.id).mouseover(function(){d[i.id].pause=!0}),t(".cs-"+i.id).mouseout(function(){d[i.id].pause=!1}),t("#cs-title-"+i.id).mouseover(function(){d[i.id].pause=!0}),t("#cs-title-"+i.id).mouseout(function(){d[i.id].pause=!1}))}(i),d[i.id].navigation&&function(i){if(d[i.id].showNavigationPrevNext&&(t(i).append("<div id='cs-navigation-"+i.id+"'></div>"),d[i.id].navigationPrevNextAlwaysShown||t("#cs-navigation-"+i.id).hide(),t("#cs-navigation-"+i.id).append("<a href='#' id='cs-prev-"+i.id+"' class='cs-prev'>"+d[i.id].prevText+"</a>"),t("#cs-navigation-"+i.id).append("<a href='#' id='cs-next-"+i.id+"' class='cs-next'>"+d[i.id].nextText+"</a>"),t("#cs-prev-"+i.id).css({position:"absolute",top:d[i.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:d[i.id].opacity}).click(function(t){t.preventDefault(),g(i,"prev"),v(i)}).mouseover(function(){t("#cs-navigation-"+i.id).show()}),t("#cs-next-"+i.id).css({position:"absolute",top:d[i.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:d[i.id].opacity}).click(function(t){t.preventDefault(),g(i),v(i)}).mouseover(function(){t("#cs-navigation-"+i.id).show()}),t("#cs-navigation-"+i.id+" a").mouseout(function(){d[i.id].navigationPrevNextAlwaysShown||t("#cs-navigation-"+i.id).hide(),d[i.id].pause=!1})),d[i.id].showNavigationButtons){var e;for(t("<div id='cs-buttons-"+i.id+"' class='cs-buttons'></div>").appendTo(t("#coin-slider-"+i.id)),e=1;e<s[i.id].length+1;e++)t("#cs-buttons-"+i.id).append("<a href='#' class='cs-button-"+i.id+"' id='cs-button-"+i.id+"-"+e+"'>"+e+"</a>");t.each(t(".cs-button-"+i.id),function(d,e){t(e).click(function(e){t(".cs-button-"+i.id).removeClass("cs-active"),t(this).addClass("cs-active"),e.preventDefault(),g(i,d),v(i)})}),t("#cs-buttons-"+i.id).css({left:"50%","margin-left":15*-s[i.id].length/2-5,position:"relative"})}}(i),g(i,0),v(i)};this.each(function(){P(this)})},t.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3e3,sDelay:30,opacity:.7,titleSpeed:500,effect:"",links:!0,hoverPause:!0,prevText:"prev",nextText:"next",navigation:!0,showNavigationPrevNext:!0,showNavigationButtons:!0,navigationPrevNextAlwaysShown:!1,autoplay:!1}}(jQuery);
